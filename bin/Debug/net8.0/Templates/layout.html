<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{PAGE_TITLE}}</title>
    <style>
        :root {
            --scale: 1;
        }

        body {
            font-family: -apple-system, sans-serif;
            background: #f0f2f5;
            margin: 0;
            padding-bottom: 80px;
            font-size: calc(14px * var(--scale));
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 10px;
        }

        /* Toolbar & Zoom */
        .toolbar {
            position: sticky;
            top: 0;
            background: white;
            padding: 10px;
            z-index: 99;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .zoom-control {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
        }

        input[type=range] {
            width: 80px;
        }

        .btn-refresh {
            background: #2196F3;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            font-size: 0.9em;
        }

        /* Cards & Layout */
        .card, .order-card {
            background: white;
            border-radius: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .card {
            display: flex;
            align-items: center;
            padding: 10px;
        }

        /* Image Zoom Logic */
        .img-box {
            width: calc(110px * var(--scale));
            height: calc(110px * var(--scale));
            background: #eee;
            border-radius: 8px;
            overflow: hidden;
            margin-right: 15px;
            flex-shrink: 0;
            cursor: zoom-in;
        }

            .img-box img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

        /* Typography */
        .info {
            flex: 1;
            min-width: 0;
        }

        .name {
            font-weight: 600;
            font-size: 1em;
            margin-bottom: 4px;
            line-height: 1.3;
            color: #333;
        }

        .sku {
            font-size: 0.85em;
            color: #888;
        }

        .variation {
            font-size: 0.9em;
            color: #ee4d2d;
            background: #fff0e6;
            padding: 2px 6px;
            border-radius: 4px;
        }

        /* Elements */
        .qty {
            font-size: 1.4em;
            font-weight: bold;
            margin-right: 15px;
        }

        .qty-black {
            color: #333;
        }

        .qty-red {
            color: #d50000;
        }

        .check-box {
            width: 30px;
            height: 30px;
            cursor: pointer;
            transform: scale(var(--scale));
        }

        .btn-pack {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 580px;
            background: #00bfa5;
            color: white;
            border: none;
            padding: 15px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,191,165,0.4);
            z-index: 100;
        }

        /* Lightbox Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 200;
            align-items: center;
            justify-content: center;
        }

            .modal img {
                max-width: 95%;
                max-height: 95%;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            }

        /* CSS riêng cho Packing (Sẽ được nhúng vào nếu cần) */
        .tab-container {
            display: flex;
            background: #fff;
            margin-bottom: 10px;
            border-radius: 8px;
            overflow: hidden;
        }

        .tab-btn {
            flex: 1;
            padding: 12px;
            text-align: center;
            border: none;
            background: #eee;
            cursor: pointer;
            font-weight: bold;
            color: #666;
            font-size: 1em;
        }

            .tab-btn.active {
                background: #ee4d2d;
                color: white;
            }

        .selection-bar {
            background: #fff;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .btn-create-batch {
            background: #ff9800;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
        }

            .btn-create-batch:disabled {
                background: #eee;
                color: #aaa;
                cursor: not-allowed;
            }

        .btn-cancel-batch {
            background: #ef5350;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 50%;
            font-weight: bold;
            cursor: pointer;
            margin-left: 10px;
            display: none;
        }

        .select-chk {
            width: 22px;
            height: 22px;
            margin-right: 10px;
            accent-color: #ee4d2d;
            display: none;
        }

        .mode-selecting .select-chk {
            display: inline-block;
        }

        .mode-selecting .btn-cancel-batch {
            display: inline-block;
        }

        .order-summary {
            padding: 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #fff;
        }

            .order-summary::-webkit-details-marker {
                display: none;
            }

        details[open] .order-summary {
            background: #e0f2f1;
            border-bottom: 1px solid #b2dfdb;
            color: #00695c;
        }

        details[open].order-card {
            border: 2px solid #00bfa5;
            box-shadow: 0 4px 15px rgba(0,191,165,0.2);
            transform: scale(1.01);
        }

        .order-content {
            padding: 15px;
            background: #fafafa;
        }

        .item-row {
            display: flex;
            padding: 10px 0;
            border-bottom: 1px dashed #eee;
            align-items: center;
        }

        .btn-ship {
            background: #ee4d2d;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            font-weight: bold;
            width: 100%;
            margin-top: 10px;
            cursor: pointer;
        }

        .highlight-box {
            border: 2px solid #ff1744 !important;
            background: #ffebee !important;
            transition: 0.3s;
        }

        .status-badge {
            font-size: 0.8em;
            padding: 2px 6px;
            border-radius: 4px;
            margin-left: 5px;
        }

        .badge-picked {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #a5d6a7;
        }

        .location-badge {
            display: inline-block;
            background-color: #e3f2fd; /* Màu xanh nhạt */
            color: #0d47a1; /* Chữ xanh đậm */
            border: 1px solid #90caf9;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.9em;
            font-weight: bold;
            margin-top: 4px;
        }

        .location-icon {
            margin-right: 4px;
        }
    </style>
    <script>
        function updateZoom(val) { document.documentElement.style.setProperty('--scale', val); }
        function showImage(src) { document.getElementById('modalImg').src = src; document.getElementById('myModal').style.display = 'flex'; }
        function closeImage() { document.getElementById('myModal').style.display = 'none'; }
        // Global Const for Offline Mode
        const IS_OFFLINE = {{IS_OFFLINE}};
    </script>
</head>
<body>
    <div id="myModal" class="modal" onclick="closeImage()"><img id="modalImg"></div>

    <div class='toolbar'>
        <b style="font-size:1.3em">{{PAGE_TITLE}}</b>
        <div style='display:flex;gap:10px;font-size:0.9em'>
            <a href='{{REFRESH_LINK}}' class='btn-refresh'>🔄 Làm mới</a>
            <div class='zoom-control'>🔍 <input type='range' min='0.7' max='1.5' step='0.1' value='1' oninput='updateZoom(this.value)'></div>
        </div>
    </div>

    <div class='container'>
        {{BODY_CONTENT}}
    </div>
</body>
</html>